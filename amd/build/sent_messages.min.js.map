{"version":3,"file":"sent_messages.min.js","names":["define","$","noti","jaxy","removeSentItems","data","qmAjax","JSON","stringify","call","params","ids","path","class","then","response","storeMsg","location","reload","catch","init","showMsg","on","ev","preventDefault","click","counter","length","show","hide","toggle","checked","prop","remove_list","each","push"],"sources":["../src/sent_messages.js"],"sourcesContent":["define([\n    'jquery',\n    'block_quickmail/notifications',\n    'block_quickmail/jaxy'\n], function($, noti, jaxy) {\n    'use strict';\n\n    let removeSentItems = function(data) {\n        jaxy.qmAjax(JSON.stringify({\n            'call': 'remove_sent_messages',\n            'params': {\n                'ids': data\n            },\n            'path': 'classes/external/',\n            'class': 'sent_messages_ctrl'\n        // eslint-disable-next-line promise/always-return\n        })).then(function (response) {\n            noti.storeMsg(response);\n            /* TODO: To reduce server calls via page reload this could remove table\n             rows but needs to factor the pagination results.\n             for (var i of response.data.ids) {\n                 // $(this).find(\"[data-msgid='\" + i + \"']\").closest(\"tr\").remove();\n                 $('.qm_sent_msgs').find(\"[data-msgid='\" + i + \"']\").closest(\"tr\").remove();\n             }\n             But instead, let's just reload the page\n            */\n            location.reload();\n        }).catch ();\n    };\n\n    return {\n        init: function() {\n            // Show any pending messages.\n            noti.showMsg();\n\n            // Single Click Delete (Trash Icon).\n            $('.qm_sent_msgs').on('click', '.qm_sm_trash', function (ev) {\n                ev.preventDefault();\n                removeSentItems([$(this).data(\"msgid\")]);\n            });\n\n            // Single Checkbox Click.\n            // If more than 1 checkbox is checked then show the \"remove selected\" button.\n            $('.qm_sm_cb').click(function() {\n                let counter = $(\":checkbox:checked\").length;\n                if (counter > 1) {\n                    $(\"#qm_sm_selected_remove\").show();\n                } else {\n                    $(\"#qm_sm_selected_remove\").hide();\n                }\n            });\n\n            // Select ALL Checkboxes.\n            $(\"#qm_sm_select_all\").click(function () {\n                $(\"#qm_sm_selected_remove\").toggle(this.checked);\n                $('input:checkbox').prop('checked', this.checked);\n            });\n\n            // Remove Selected Button Click.\n            $('.qm_sent_msgs').on('click', '#qm_sm_selected_remove', function (ev) {\n                ev.preventDefault();\n                let remove_list = [];\n                $(\".qm_sm_cb:checkbox:checked\").each(function() {\n                    remove_list.push($(this).data(\"msgid\"));\n                });\n                removeSentItems(remove_list);\n            });\n        }\n    };\n});\n"],"mappings":"AAAAA,OAAM,iCAAC,CACH,QAAQ,CACR,+BAA+B,CAC/B,sBAAsB,CACzB,CAAE,SAASC,CAAC,CAAEC,CAAI,CAAEC,CAAI,CAAE,CACvB,YAAY,CAEZ,GAAI,CAAAC,CAAe,CAAG,QAAAA,CAASC,CAAI,CAAE,CACjCF,CAAI,CAACG,MAAM,CAACC,IAAI,CAACC,SAAS,CAAC,CACvBC,IAAA,CAAQ,sBAAsB,CAC9BC,MAAA,CAAU,CACNC,GAAA,CAAON,CACX,CAAC,CACDO,IAAA,CAAQ,mBAAmB,CAC3BC,KAAA,CAAS,oBAEb,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,SAAUC,CAAQ,CAAE,CACzBb,CAAI,CAACc,QAAQ,CAACD,CAAQ,CAAC,CASvBE,QAAQ,CAACC,MAAM,EACnB,CAAC,CAAC,CAACC,KAAK,EACZ,CAAC,CAED,MAAO,CACHC,IAAI,CAAE,SAAAA,KAAA,CAAW,CAEblB,CAAI,CAACmB,OAAO,EAAE,CAGdpB,CAAC,CAAC,eAAe,CAAC,CAACqB,EAAE,CAAC,OAAO,CAAE,cAAc,CAAE,SAAUC,CAAE,CAAE,CACzDA,CAAE,CAACC,cAAc,EAAE,CACnBpB,CAAe,CAAC,CAACH,CAAC,CAAC,IAAI,CAAC,CAACI,IAAI,CAAC,OAAO,CAAC,CAAC,CAC3C,CAAC,CAAC,CAIFJ,CAAC,CAAC,WAAW,CAAC,CAACwB,KAAK,CAAC,UAAW,CAC5B,GAAI,CAAAC,CAAO,CAAGzB,CAAC,CAAC,mBAAmB,CAAC,CAAC0B,MAAM,CAC3C,GAAc,CAAC,CAAXD,CAAW,CAAE,CACbzB,CAAC,CAAC,wBAAwB,CAAC,CAAC2B,IAAI,EACpC,CAAC,IAAM,CACH3B,CAAC,CAAC,wBAAwB,CAAC,CAAC4B,IAAI,EACpC,CACJ,CAAC,CAAC,CAGF5B,CAAC,CAAC,mBAAmB,CAAC,CAACwB,KAAK,CAAC,UAAY,CACrCxB,CAAC,CAAC,wBAAwB,CAAC,CAAC6B,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,CAChD9B,CAAC,CAAC,gBAAgB,CAAC,CAAC+B,IAAI,CAAC,SAAS,CAAE,IAAI,CAACD,OAAO,CACpD,CAAC,CAAC,CAGF9B,CAAC,CAAC,eAAe,CAAC,CAACqB,EAAE,CAAC,OAAO,CAAE,wBAAwB,CAAE,SAAUC,CAAE,CAAE,CACnEA,CAAE,CAACC,cAAc,EAAE,CACnB,GAAI,CAAAS,CAAW,CAAG,EAAE,CACpBhC,CAAC,CAAC,4BAA4B,CAAC,CAACiC,IAAI,CAAC,UAAW,CAC5CD,CAAW,CAACE,IAAI,CAAClC,CAAC,CAAC,IAAI,CAAC,CAACI,IAAI,CAAC,OAAO,CAAC,CAC1C,CAAC,CAAC,CACFD,CAAe,CAAC6B,CAAW,CAC/B,CAAC,CACL,CACJ,CACJ,CAAC,CAAC"}